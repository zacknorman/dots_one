zzc.prototype.pN=W(1364,function(){if(!this.isDisposed()){var a=this.Fa("waffle-dbsource-pill-menuitem-refreshquery-info-message"),b=De("Fetching bytes estimate...");Ke(a,b);this.qb()&&(P(a,!0),a=this.Fa("waffle-dbsource-pill-menuitem-refreshquery-info-error-button"),P(a,!1))}});Bzc.prototype.pN=W(1363,function(){this.C["refresh-query"].pN()});Jzc.prototype.pN=W(1362,function(){this.C.pN()});function ETg(a){var b=kL.getInstance();b.D=a;b.C&&b.D.XD(b.C)}
function FTg(a,b){return new Qp(function(c,d){Yq(Fl(Gl(El(Zq(Dl(a.C.$e("/answers/tablemetadata"),"did",b),"POST"),2),function(e){var f=new tl;f.kh=!0;e=f.Jd(hL.Aa(),e.Ne());c(e)}),function(){d()})).We()})}function GTg(a,b,c){var d=new tl;d.kh=!0;var e=d.serialize(b);return new Qp(function(f,h){uo(c,function(){lL(a,"/dbx/validateCalculatedColumn",[],e,function(k){k=d.Jd(dL.Aa(),k.Ne());f(k)},function(){var k=new dL,l=new ch;D(k,1,l);l.Rb(3);D(l,2,31);h(k)})})})}
function HTg(a,b,c){var d=new tl;d.kh=!0;var e=d.serialize(b);return new Qp(function(f,h){uo(c,function(){lL(a,"/dbx/refreshObject",a.F?["esid",a.F]:[],e,function(k){d.kh=!1;k=d.Jd(Pcc.Aa(),k.Ne());f(k)},function(){var k=new Pcc,l=new ch;l.Rb(3);D(l,2,31);var n=new UK;D(n,1,l);Mg(k,2,n);h(k)})})})}function ITg(a,b){var c=new Set;b.forEach(function(d){a.O.add(d);c.add(d)});Bfc(a,c,"dbobjectmodel-event-update")}function JTg(a){a.od&&a.od.Yc(a.La(),a.O?5:1,new Pm(0,a.O?50:0,12,a.O?0:50))}
function KTg(a,b,c,d,e,f,h,k){VM.call(this,a,b,c,d,e,k);this.F=new Jzc(h,d.kc(),k);this.Ga(this.F,!0);this.H=f;this.C=null}t(KTg,VM);KTg.prototype.Ba=function(){var a=this.oa().Ba("DIV","waffle-dbsource-container");this.jb(a)};KTg.prototype.Ia=function(){VM.prototype.Ia.call(this);this.C=new nC(this.La(),this.oa());oC(this.C)};KTg.prototype.vd=function(){Jf(this.C);VM.prototype.vd.call(this)};
KTg.prototype.focus=function(){var a=this.F;a.D.isVisible()&&a.D.isEnabled()&&(a.D.La().focus(),a.D.Tr(!0));this.H.Rb(2)};function LTg(a){return a.D?Object.values(a.D).find(function(b){if(!(b instanceof KO))return!1;b=b.getElement();return!!b&&!!b.querySelector(":hover")})||null:null}function MTg(a){return(a=LTg(a.J))?a.Xd().getId():null}function NTg(a){return(a=MTg(a))?ritz_api.BigSheetsApi.getExternalDataIdForObject(a):null}
function OTg(a){for(var b=a.J.C,c=b.length-1;0<=c;c--){var d=QO(a.J,b[c]).Xd();if(d instanceof DM&&null!=d.D&&(d=d.getId(),ritz_api.BigSheetsApi.getExternalDataIdForObject(d)))return d}return null}function PTg(a){var b=a.L.C.C;if(OG(b))return ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(b.ib());(b=NTg(a))||(b=(b=oNc(a))?pNc(a,b):null);if(b||(b=(b=OTg(a))?ritz_api.BigSheetsApi.getExternalDataIdForObject(b):null))return b;b=uJ(a.Sa());return pNc(a,b)}
function QTg(a,b){[a.J,a.V].forEach(function(c){return c.setPosition(b)});a.C.some(function(c){c.C.setPosition(b)})}function RTg(a,b,c){this.D=a;this.C=b;this.F=c}RTg.prototype.Ct=g("D");function STg(){var a=new ZC,b="Configure a project in the Google Cloud Platform console to continue. "+(a.cd("a",{"class":"goog-inline-block",href:"https://connectedsheets.page.link/addproject",target:"_blank"})+("Learn more"+a.ad("a")));return a.format(b)}function TTg(a,b){return{title:a,body:b}}
function X4(a){return TTg("Query failed",a)}function UTg(a){return a?qbf[a]||"other":"other"}
function VTg(a,b){var c=b.getErrorCode();b=b.Gn();switch(c){case 36:case 20:return X4(gbf(3,b));case 37:return X4(hbf(b));case 6:return a=(new pB("{objectType, select, chart {The data source took too long to return this chart. Please try again.} pivot_table {The data source took too long to return this pivot table. Please try again.} formula {The data source took too long to return this formula result. Please try again.} record {The data source took too long to return this extract. Please try again.} datasource_preview {The data source took too long to return this preview. Please try again.} other {The data source took too long to return data. Please try again.}}")).format({objectType:UTg(a)}),TTg("Timed out",
ibf(a,b));case 8:c=rbf.format(z(y(),"febpr")?5E4:3E4);var d=rbf.format(z(y(),"femdrr")?5E4:25E3);c=(new pB("{objectType, select, chart {Results exceed {maxRows} rows. Update this chart and try again.}pivot_table {Update the number of rows and/or columns to a maximum of {dbPivotTableMaxRows} by using filtering, grouping, or customizing number of rows and/or columns. Then, try again.}formula {Results exceed {maxRows} rows. Update this function and try again.} record {Results exceed {dbRecordMaxRows} rows. Update this extract and try again.} datasource_preview {Results exceed {maxRows} rows. Update this connected sheet and try again.} other {Results exceed {maxRows} rows. Update this query and try again.}}")).format({objectType:UTg(a),
maxRows:jbf,dbPivotTableMaxRows:c,dbRecordMaxRows:d});return TTg(1==a?"Rows and/or columns exceed limit":"Too many rows",ibf(c,b));case 18:return TTg("Unsupported type",XY("The query returns an ARRAY or a STRUCT type, which is currently not supported."));case 19:return X4(lbf());case 22:return X4(mbf());case 26:return X4(XY("The column type of connected data is not compatible with the operation."));case 30:return X4(XY("Sorting by an array column is not supported for connected sheets and extracts."));
case 32:return TTg("Too many customized number of rows & columns",XY("Your pivot table contains one or more array database columns. Only one can have customized number of rows or columns."));case 33:return X4(XY("Results exceed storage limit. Update query and run again."));case 35:return a=(new pB("{objectType, select, chart {A column referenced by this chart is not available.} pivot_table {A column referenced by this pivot table is not available.} formula {A column referenced by this formula is not available.} record {A column referenced by this extract is not available.} datasource_preview {The column settings do not match the data source. Try removing sorts, filters and calculated columns and try again.} other {A column referenced by this object is not available.}}")).format({objectType:UTg(a)}),
a=XY(a),X4(a);case 34:return a=(new pB("{objectType, select, chart {A calculated column referenced by this chart no longer exists. Update and try again.} pivot_table {A calculated column referenced by this pivot table no longer exists. Update and try again.} formula {A calculated column referenced by this formula no longer exists. Update and try again.} record {A calculated column referenced by this extract no longer exists. Update and try again.} datasource_preview {A calculated column referenced by this preview no longer exists. Update and try again.} other {A calculated column referenced by this object no longer exists. Update and try again.}}")).format({objectType:UTg(a)}),
a=XY(a),X4(a);case 38:return X4(nbf(null))}return X4(nbf(b))}function WTg(){var a='<div class="'+T("waffle-bigquerydbsourcesettingsdialog-project-section")+'"><h3 class="'+T("waffle-bigquerydbsourcesettingsdialog-project-header")+'">';a=a+'Choose a cloud project</h3><div class="'+(T("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper")+'"></div></div>');return S(a)}
function XTg(){var a='<div class="'+T("waffle-bigquerydbsourcesettingsdialog-footer-wrapper")+'"><p class="'+T("waffle-bigquerydbsourcesettingsdialog-footer-message")+'">';return S(a+'Your use of BigQuery is governed by the <a href="https://cloud.google.com/terms/" target="_blank">Google Cloud Platform Terms of Service</a>.</p></div>')};function YTg(a,b,c,d){bZ.call(this,"waffle-bigquerydbsourcesettingsdialog",d);d=c?"Edit data connection":"Add data connection";this.setTitle(this.oa().Ba("SPAN",void 0,d));this.J=a;this.H=b;this.F=c||null;this.D=new jcf(void 0,this.oa());this.Ga(this.D)}t(YTg,bZ);
YTg.prototype.Ba=function(){bZ.prototype.Ba.call(this);Iy(this.rb(),WTg);WY(this).appendChild(Ky(XTg));this.D.render(this.bb("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"));mX(this.D).setAttribute("placeholder","Search projects");this.oa().Qi(this.D.La(),!1)};YTg.prototype.Ia=function(){var a=this;bZ.prototype.Ia.call(this);this.D.Sn(!0);Wbf(this.J).then(function(b){a.qb()&&(b&&0!=b.length||a.H.C(36566),ZTg(a,b),a.D.Sn(!1))},function(){a.reject(!0)})};
function ZTg(a,b){if(0==b.length){var c=a.oa(),d=Lp(c,STg());P(a.Fa("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"),!1);c.appendChild(a.Fa("waffle-bigquerydbsourcesettingsdialog-project-section"),c.Ba("DIV","waffle-bigquerydbsourcesettingsdialog-error-caption",d))}else $Tg(a,b),a.getHandler().listen(a.D,"action",function(e){return aUg(a,e,b)})}
function $Tg(a,b){b=bUg(b);lcf(a.D,b);qcf(a.D);b=a.D;var c="We are only showing the top "+(yzc.format(1E4)+" projects. Use the search bar to find unlisted projects.");b.F.setVisible(!0);b.F.C.setContent(b.oa().Ba("DIV",void 0,b.oa().Ba("DIV",{id:"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-aria-content","class":"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-content"},jp(De(c)))));mcf(a.D)}function bUg(a){return Uc(a,function(b){return new Ybf(b.getId(),b.getName())})}
function aUg(a,b,c){b=b.target.Sa();var d=b instanceof Ybf?b.UR:b.getValue();Yx(a.La(),"waffle-bigquerydbsourcesettingsdialog-transition-out");a.D.n2("translateX(-24px)").then(function(){return a.resolve(new Vbf(c,d,d,"db-source-table",a.F))})};function cUg(a){a=a.Hm;var b='<div class="'+T("waffle-calculated-columns-description")+'">';b=b+'Calculated columns let you create new columns for better analysis by using Sheets functions and the current data in your connected sheet.<div class="'+(T("waffle-calculated-columns-tooltip")+'"></div></div><div class="'+T("waffle-calculated-columns-display-name-title")+'" id="waffle-calculated-columns-display-name-title">');b=b+"Calculated column name</div>"+((a?'<div class="'+T("waffle-calculated-columns-toggle-tabs")+
" "+T("waffle-gm-sidebar")+'"></div><div class="'+T("waffle-calculated-columns-column-menu-tab")+'"></div><div class="'+T("waffle-calculated-columns-function-menu-tab")+'"></div>':"")+R(naf({bd:"waffle-calculated-columns-display-name-input",maxLength:50}))+'<div class="'+T("waffle-calculated-columns-display-name-error")+'"></div><div class="'+T("waffle-calculated-columns-formula-editor")+'"></div>');return S(b)};function dUg(){var a=S;var b=S('<svg class="waffle-calculated-columns-tooltip-help-icon" xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="#5F6368"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>');return a('<div class="waffle-calculated-columns-tooltip-container"><div class="waffle-calculated-columns-tooltip-help-button">'+
b+"</div></div>")};function eUg(a,b){Q.call(this,b);this.H=new yz(void 0,Xy(wz,"waffle-calculated-columns-tooltip-help-button"),this.oa());this.Ga(this.H);this.C=new kz(this.oa());this.qa(this.C);this.D=null;this.qa(this.D);this.F=null;this.O=a;this.L=uz(pz(new oz,1))}t(eUg,Q);
eUg.prototype.Ba=function(){this.jb(Ky(dUg));this.H.Va(this.Fa("waffle-calculated-columns-tooltip-help-button"));this.C.Ic("waffle-calculated-columns-tooltip-help-bubble");this.C.ir(!1);lz(this.C,!0);this.C.setPosition(1,2,0,-7);this.F=this.oa().Ba("A",{target:"_blank"},"Learn more");Me(this.F,"https://connectedsheets.page.link/calccolhelp");var a="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("RIGHT")+"(orderId, 4)"),b="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("YEAR")+"(startDate)"),
c="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("IF")+"(units > 0, total/units, 0)");this.C.setContent(this.oa().Ba("DIV",void 0,this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-title",jp(De("Try these formulas"))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",jp(De("Do basic math"))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(De("=price * quantity"))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",
jp(De("Manipulate text"))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(De(a))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",jp(De("Use dates"))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(De(b))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",jp(De("Apply conditional logic"))),this.oa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",jp(De(c))),this.oa().Ba("DIV",
"waffle-calculated-columns-tooltip-help-bubble-link",this.F)));this.C.render();a=this.C.La();this.oa().Qi(a,!0);Rx(a,"hidden",!1);this.C.setVisible(!1)};
eUg.prototype.Ia=function(){var a=this;Q.prototype.Ia.call(this);var b=this.Fa("waffle-calculated-columns-tooltip-help-button");this.C.qj(this.oa().Ou(b));Ux(b,"Try these formulas");cA(b,"Support",void 0);RMe(b);this.getHandler().listen(this.H,"action",this.J).listen(this.C.getElement(),"keydown",this.R).listen(this.C,"hide",function(){return $x(a.La(),"waffle-calculated-columns-tooltip-help-bubble-visible")}).listen(this.F,"click",function(){a.O.C(36653,a.L)})};
eUg.prototype.R=function(a){27===a.keyCode&&(this.J(),this.Fa("waffle-calculated-columns-tooltip-help-button").focus())};eUg.prototype.J=function(){var a=!v9a(this.C.D);by(this.La(),"waffle-calculated-columns-tooltip-help-bubble-visible",a);this.C.setVisible(a);Jf(this.D);a?(this.O.C(36652,this.L),this.D=new nC(this.C.La(),this.oa()),this.qa(this.D),oC(this.D),this.C.getElement().focus()):this.Fa("waffle-calculated-columns-tooltip-help-button").blur()};function fUg(a,b){this.D=b;this.C=new Map;gUg(this,a)}function hUg(a){return a.replace(/^[\t\r\n]+|[\t\r\n]+$/g,"").replace(/[\t\r\n]+/g," ")}function gUg(a,b){b=b.map(function(c){return oL(c)});a.C=new Map(b.map(function(c){return[UI(c,a.D),c]}))}function iUg(a){var b=[];a.C.forEach(function(c,d){Kg(c,2)||b.push(d)});return b}function jUg(a){var b=[];a.C.forEach(function(c,d){b.push(d)});return b};function kUg(a){a=a.nkb;return S('<div class="waffle-calculated-columns-formula-editor-container"><div class="waffle-calculated-columns-formula-editor-input-container"><textarea class="'+T("waffle-calculated-columns-formula-editor-input")+'" spellcheck="false" placeholder="'+T(a)+'"></textarea></div></div>')};function lUg(a,b,c){b=c||b;return S('<div class="'+T("waffle-calculated-columns-validation-widget")+'"><div class="'+T("waffle-calculated-columns-validation-widget-open-button")+'"><div class="'+T("waffle-calculated-columns-validation-widget-spinner")+'">'+R(uTe({Sb:!0},b))+"</div>"+R(sSe())+R(rzc(null))+R(rSe())+'</div><div class="'+T("waffle-calculated-columns-validation-widget-bar")+'"><div class="'+T("waffle-calculated-columns-validation-widget-spinner")+'">'+R(uTe({Sb:!0},b))+"</div>"+R(sSe())+
R(rzc(null))+R(rSe())+'<div class="'+T("waffle-calculated-columns-validation-widget-message")+'"></div><div class="'+T("waffle-calculated-columns-validation-widget-close-button")+'">'+R(pSe(null,b))+"</div></div></div>")};function mUg(a,b,c){Q.call(this,c);this.H=a;this.L=b;this.J=uz(pz(new oz,1));this.D=new yz(void 0,Xy(wz,"waffle-calculated-columns-validation-widget-open-button"),this.oa());this.Ga(this.D);this.C=new yz(void 0,Xy(wz,"waffle-calculated-columns-validation-widget-close-button"),this.oa());this.Ga(this.C);this.F=!1}t(mUg,Q);mUg.prototype.Ba=function(){this.jb(Ky(lUg));this.C.Va(this.Fa("waffle-calculated-columns-validation-widget-close-button"));this.D.Va(this.Fa("waffle-calculated-columns-validation-widget-open-button"))};
mUg.prototype.Ia=function(){var a=this;Q.prototype.Ia.call(this);this.D.Rd("Show the formula validation widget");this.C.Rd("Close the formula validation widget");this.D.Na(this.H);this.D.setVisible(this.H);this.getHandler().listen(this.C,"action",function(){return a.setVisible(!1)}).listen(this.D,"action",function(){a.setVisible(!0);a.L.C(36654,a.J);var b=a.Fa("waffle-calculated-columns-validation-widget-message");TJ(zp(b))});nUg(this)};
mUg.prototype.setVisible=function(a){this.F=a;this.qb()&&by(this.La(),"waffle-calculated-columns-validation-widget-visible",this.F)};mUg.prototype.isVisible=g("F");
function nUg(a){$x(a.La(),"waffle-calculated-columns-validation-widget-valid");$x(a.La(),"waffle-calculated-columns-validation-widget-invalid");$x(a.La(),"waffle-calculated-columns-validation-widget-loading");var b="Try this example: ="+(ritz_api.RitzModelApi.getLocalizedFunctionName("ROUND")+"(<BigQueryColumnName>, 2) * 5");oUg(a,b);a.D.Rd("Show the formula validation widget")}function oUg(a,b){var c=a.Fa("waffle-calculated-columns-validation-widget-message");b=De(b);Ke(c,b);a.F&&TJ(zp(c))};function pUg(a,b,c,d,e,f,h,k){Q.call(this,k);this.V=a;this.xa=b;this.Ha=c;this.R=d;this.C=new CY("");this.qa(this.C);this.H=this.J=null;this.O=!1;this.F=new mUg(d,h,this.oa());this.Ga(this.F);this.Ka=f;this.ma=this.L=!1;this.Da=e;this.D=h;this.Ca=uz(pz(new oz,1))}t(pUg,Q);m=pUg.prototype;m.Ba=function(){Q.prototype.Ba.call(this);this.jb(Ky(kUg,{nkb:"=Write formula here"}))};
m.Ia=function(){Q.prototype.Ia.call(this);this.C.TS(255);var a=this.Fa("waffle-calculated-columns-formula-editor-input");this.C.Va(a);Rx(a,"label","Formula editor");this.J=new aC(a);this.F.render(this.La());this.R&&(this.H=new hy(this.C.getElement()),this.getHandler().listen(this.J,"input",this.f4).listen(this.H,"focusin",this.WYb).listen(this.H,"focusout",this.XYb));null!=this.xa&&(this.C.setValue(ritz_api.BigSheetsApi.getCalculatedColumnFormulaString((new tl).serialize(this.xa),this.V)),this.R&&
this.f4());this.C.Na(this.R)};m.vd=function(){Q.prototype.vd.call(this);Jf(this.J)};m.WYb=function(){Xx(this.La(),"waffle-calculated-columns-formula-editor-container-invalid")||Yx(this.La(),"waffle-calculated-columns-formula-editor-container-focus")};m.XYb=function(){$x(this.La(),"waffle-calculated-columns-formula-editor-container-focus")};
m.f4=function(){if(this.L)this.ma=!0,qUg(this);else{var a=this.Da.getRitzCalculatedColumnFormulaValidationResult(this.V,rUg(this),jUg(this.Ha));a=(new tl).Jd(eL.Aa(),a);switch(a.getStatus()){case 4:this.D.C(36699);break;case 12:this.D.C(36701);break;case 7:var b=new P2d;var c=Kg(a,5)?C(a,5):"CUSTOM_OR_NON_ENGLISH_FUNCTION";b=L(b,1,c);c=new qk;b=Oj(c,27,b);b=uz(tz(pz(new oz,1),b));this.D.C(36700,b)}1!=a.getStatus()?(a=a.Gn(),sUg(this,!1,a)):(a=C(a,2),0==Og(a,1).length?sUg(this,!0,null):tUg(this,a))}};
function tUg(a,b){a.L=!0;qUg(a);var c=new wdc;D(c,2,a.V);D(c,1,b);GTg(kL.getInstance(),c,a.Ka).then(function(d){d=d.Li();3==d.getState()?(d="BigQuery error: "+d.Gn(),sUg(a,!1,d)):sUg(a,!0,null);uUg(a)},function(){sUg(a,!1,"Formula validation failed");uUg(a)})}function uUg(a){a.L=!1;a.ma&&(a.ma=!1,a.f4())}
function sUg(a,b,c){a.O=b;if("="==Dd(rUg(a)))$x(a.La(),"waffle-calculated-columns-formula-editor-container-invalid"),nUg(a.F);else{by(a.La(),"waffle-calculated-columns-formula-editor-container-invalid",!b);b&&Np(a.oa())==a.C.getElement()&&Yx(a.La(),"waffle-calculated-columns-formula-editor-container-focus");var d=a.F;$x(d.La(),"waffle-calculated-columns-validation-widget-loading");by(d.La(),"waffle-calculated-columns-validation-widget-valid",b);by(d.La(),"waffle-calculated-columns-validation-widget-invalid",
!b);b?c=b="Formula is valid":(b=c,c="Formula is invalid. Click for more detail.");oUg(d,b);d.D.Rd(c)}a.dispatchEvent(new vUg("validation-update"))}function rUg(a){a=a.C.getValue();return uF(Ve(a))?a:"="+a}
function qUg(a){a.O=!1;a.dispatchEvent(new vUg("validation-update"));$x(a.La(),"waffle-calculated-columns-formula-editor-container-invalid");a=a.F;Yx(a.La(),"waffle-calculated-columns-validation-widget-loading");$x(a.La(),"waffle-calculated-columns-validation-widget-valid");$x(a.La(),"waffle-calculated-columns-validation-widget-invalid");a.F&&oUg(a,"");a.D.Rd("Show the formula validation widget")}function vUg(a,b){Bo.call(this,a,b)}t(vUg,Bo);function wUg(a,b,c){b=c||b;c=a.description;return S(R(x$e({sZ:"",match:"",rZ:a.label},b))+xUg({sZ:"",match:"",rZ:c},b))}function xUg(a){var b=a.sZ,c=a.match;a=a.rZ;return S('<span class="'+T("waffle-function-filtered-menu-item-description")+'"><span>'+R(b)+'</span><span class="'+T("waffle-function-filtered-menu-item-description-match")+'">'+R(c)+"</span><span>"+R(a)+"</span></span>")};function yUg(a,b,c){z$e.call(this,a,b,c,new zUg)}t(yUg,z$e);yUg.prototype.Ia=function(){z$e.prototype.Ia.call(this);this.Ic("waffle-function-filtered-menu-item")};yUg.prototype.Zd=function(){return this.Sa().AY};
yUg.prototype.C=function(a){a=void 0===a?"":a;var b=this.Rg();if(b){b=b.match(new RegExp(af(a),"i"));var c=this.Zd().match(new RegExp(af(a),"i"));this.setVisible(""===a||!!b||!!c);A$e(this,b?b.index:0,b?a.length:0);b=c?c.index:0;c=c?a.length:0;a=this.oa();c=b+c;var d=this.Zd();b=Jy(xUg,{sZ:d.substring(0,b),match:d.substring(b,c),rZ:d.substring(c,d.length)});c=a.Fa("waffle-function-filtered-menu-item-description",this.La());a.fC(b,c)}else this.setVisible(!a)};
function zUg(){Bz.apply(this,arguments)}t(zUg,Bz);zUg.prototype.Ba=function(a){a=a.Sa();var b=Ky(wUg,{label:a.getName(),description:a.AY});this.Fe(b,a.getName()+". "+a.AY);return b};ua(zUg);function AUg(){lX.apply(this,arguments)}t(AUg,lX);AUg.prototype.Ba=function(){lX.prototype.Ba.call(this);Yx(this.La(),"waffle-function-filtered-menu")};AUg.prototype.Ia=function(){lX.prototype.Ia.call(this);mX(this).setAttribute("placeholder","Search");Iz(this,!1)};AUg.prototype.jg=ba();function BUg(a,b,c,d,e){UJ.call(this,153);this.L=a;this.O=b;this.J=c||"";this.F=d;this.C=e}t(BUg,UJ);BUg.prototype.Nd=function(){var a=new cQb;D(a,1,this.L);D(a,4,this.O);D(a,3,this.J);D(a,2,this.F);for(var b=0;b<this.C.length;b++)Mg(a,5,this.C[b]);return a};function CUg(a,b,c,d,e,f,h,k,l,n){WB.call(this);this.xa=a;this.Te=new eUg(n,this.oa());this.Ga(this.Te);this.V=b;if(null==b)b=null;else{var q=new eh;D(q,2,b);b=q}this.ma=b;this.$a=c;this.Qa=d;this.fb=e;this.L=f;this.C=new VT("Enter name");this.Ha=null;this.H=new pUg(a,this.ma,d,f,k,l,n,this.oa());this.Ga(this.H);this.R=this.O=this.F=null;f&&(this.F=new LY(void 0,this.oa()),this.O=new AUg(void 0,this.oa()),this.R=new RY("Columns","Functions",!0,this.oa()),this.Ga(this.F),this.Ga(this.O),this.Ga(this.R));
this.Za=h;this.Xa=n;this.Ta=uz(pz(new oz,1))}t(CUg,WB);m=CUg.prototype;m.Ja=function(){WB.prototype.Ja.call(this)};
m.Ba=function(){WB.prototype.Ba.call(this);var a=null==this.V?"Add calculated column":this.L?"Edit calculated column":"View calculated column";this.setTitle(a);Yx(qy(this),"waffle-calculated-columns-dialog");var b=new ty;b.set("cancel","Cancel",!1,!0);this.L&&b.set("save",null==this.V?"Add":"OK",!0,!1);wy(this,b);Hy(this,"save");(b=G9a(this))&&Ux(b,a);a=Ky(cUg,{Hm:this.L});b=this.rb();this.oa().appendChild(b,a);this.Te.render(this.Fa("waffle-calculated-columns-tooltip"));this.H.render(this.Fa("waffle-calculated-columns-formula-editor"))};
m.Ia=function(){WB.prototype.Ia.call(this);by(qy(this),"waffle-calculated-columns-dialog-view-only",!this.L);var a=this.oa().Fa("waffle-calculated-columns-display-name-input");this.C.Va(a);this.C.Na(this.L);this.Ha=new aC(a);var b=this.oa().Fa("waffle-calculated-columns-display-name-title");Rx(a,"labelledby",b.id);null!=this.ma&&(this.C.setValue(UI(this.ma,this.xa)),this.XNa());this.mCa();if(this.L){a=this.Fa("waffle-calculated-columns-column-menu-tab");this.R.D=a;a=this.Fa("waffle-calculated-columns-function-menu-tab");
this.R.F=a;this.R.render(this.Fa("waffle-calculated-columns-toggle-tabs"));this.F.render(this.Fa("waffle-calculated-columns-column-menu-tab"));this.O.render(this.Fa("waffle-calculated-columns-function-menu-tab"));mX(this.F).setAttribute("placeholder","Search");Iz(this.F,!1);a=ja(this.$a);for(b=a.next();!b.done;b=a.next())b=b.value,Kg(oL(b),2)||F$e(this.F,b,this.xa);b=jgc(this.fb,!1,!1,!0);a=this.O;b=ja(b);for(var c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=d.getName();d=new yUg(e,d,c.oa());
c.Ga(d,!0)}this.getHandler().listen(this,"dialogselect",this.VYb).listen(this.Ha,"input",this.XNa).listen(this.H,"validation-update",this.mCa).listen(this.F,"action",this.bsb).listen(this.O,"action",this.vxb)}};m.vd=function(){WB.prototype.vd.call(this);Jf(this.Ha)};
m.VYb=function(a){var b=this;if("save"==a.key){if(a=rUg(this.H),!Cd(a)){var c=null==this.V;a=new BUg(this.xa,hUg(this.C.getValue()),this.V,a,iUg(this.Qa));var d=c?36645:36647,e=c?36644:36646;VJ(a,function(f){b.Xa.C(f?e:d,b.Ta);f&&b.dispatchEvent(new DUg("update",b.xa,c))});this.Za.C(a)}}else"cancel"==a.key&&this.Xa.C(36643,this.Ta)};
m.bsb=function(a){var b=a.target.Rg();a=this.H;b=cmc(b);var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue(),f=c+b.length;a.C.setValue(e.slice(0,c)+b+e.slice(d));a.C.getElement().setSelectionRange(f,f);a.f4();a.D.C(36732,a.Ca)};
m.vxb=function(a){var b=a.target.getValue().getName();a=this.H;var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue();b=b+"("+e.slice(c,d)+")";e=e.slice(0,c)+b+e.slice(d);b=c+b.length;c==d&&--b;c=b;a.C.setValue(e);a.C.getElement().setSelectionRange(c,c);a.f4();a.D.C(36733,a.Ca)};
m.XNa=function(){var a=EUg(this);by(this.C.getElement(),"waffle-calculated-columns-display-name-input-invalid",!!a);var b=a?a:"";a=this.Fa("waffle-calculated-columns-display-name-error");b=De(b);Ke(a,b);TJ(zp(a));this.mCa()};m.mCa=function(){var a=this.L&&!EUg(this)&&!Te(this.C.getValue())&&this.H.O;yy(this.D,"save",a)};
function EUg(a){if(Te(a.C.getValue()))var b=null;else a:{b=a.Qa;var c=a.C.getValue();a=a.ma;c=hUg(c);if(Cd(c))b="Calculated column name cannot be empty";else{for(var d=ja(b.C.keys()),e=d.next();!e.done;e=d.next())if(e=e.value,Bd(e,c))if(d=null!=a,b=b.C.get(e),d&&a.equals(b))break;else{b="A column named "+(c+" already exists");break a}b=null}}return b}function DUg(a,b,c){Bo.call(this,a);this.xt=b;this.C=c}t(DUg,Bo);function FUg(a,b,c,d,e,f){fX.call(this,a,b,c,new CRe,"db",d,e,f);this.C="";this.V=!0;this.ma=null}t(FUg,fX);m=FUg.prototype;m.Ia=function(){fX.prototype.Ia.call(this);this.sea()};m.GC=function(){return OI(this.J.C)&&z(y(),"feda")?fX.prototype.GC.call(this):!1};m.Na=function(a){this.qb()&&(!this.V&&z(y(),"fedaic")?fX.prototype.Na.call(this,!1,"This data table is not yet enabled for Answers by your data table admin"):fX.prototype.Na.call(this,a))};m.mNa=function(){WQe(null,null,this.C,this.D)};
m.BQa=function(a){WQe(a,null,this.C,this.D)};m.j4=function(){var a=fX.prototype.j4.call(this);a&&this.GC()&&this.m_();return a};function GUg(a,b){a.C!=b&&(a.C=b,z(y(),"fedaic")?(a.ma&&a.ma.cancel(),a.ma=FTg(kL.getInstance(),a.C),Wp(a.ma.then(function(c){c=0==c.getError();a.V=c;a.Na(a.V);a.V?a.GC()&&a.m_():a.MB()},function(c){c instanceof Xp||(a.V=!1,a.Na(a.V),a.MB())}),function(){a.ma=null})):a.GC()&&a.m_())}m.m_=function(){this.C?HUg(this):this.MB();XQe(null,this.C,this.D)};
function HUg(a){if(YYe(a)){var b=a.O;b.H=a.C;sRe(b);ETg(b);b.XZ([]);var c=a.J;Zp(function(){a.C&&pL(c.xa,a.C,!0).then(function(d){return IUg(a,d,a.C)})},3E3)}}function IUg(a,b,c){b.forEach(function(d){var e=efc(d,c);if(null!=e){var f=a.O;a:{if(d.hasType())switch(d.getType()){case 1:case 2:case 4:case 5:case 6:case 7:d="$dim";break a;case 3:d="$met";break a}d="$unu"}uRe(f,e,d)}})}m.MB=function(){fX.prototype.MB.call(this);this.C="";XQe(null,null,this.D)};function JUg(a){var b=a.label;a=a.gi;return S((a?'<div class="'+T("goog-menuitem-icon")+" "+T("waffle-charteditor-column-filtered-menu-item-icon")+" "+T(a)+'"></div>':"")+'<span class="'+T("waffle-datasource-configbar-columns-menu-item-label")+'">'+R(b)+"</span>")}function KUg(){return S('<div class="'+T("waffle-datasource-configbar-columns-menu-spinner-container")+'"></div>')};function LUg(a){Hz.call(this,a);this.Ce=new tW(!1);this.qa(this.Ce);this.C=new Cz(Ky(KUg),void 0,this.oa());this.C.cA(!1);this.Ga(this.C)}t(LUg,Hz);LUg.prototype.Ia=function(){Hz.prototype.Ia.call(this);Yx(this.La(),"waffle-datasource-configbar-columns-menu")};LUg.prototype.Ba=function(){Hz.prototype.Ba.call(this);this.C.render(this.La());this.Ce.render(this.C.Fa("waffle-datasource-configbar-columns-menu-spinner-container"))};
LUg.prototype.D=function(a,b){a=ja(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=efc(d,b);null!==c&&(d=D$e(d.getType()),this.Ga(new Cz(Ky(JUg,{label:c,gi:d}),void 0,this.oa()),!0))}};function MUg(a,b){var c=a.C.getElement();c&&(by(c,"waffle-datasource-configbar-columns-menu-loading",b),P(c,b),a.Ce.setActive(b))};function NUg(){Hz.apply(this,arguments)}t(NUg,Hz);NUg.prototype.Ia=function(){Hz.prototype.Ia.call(this);Yx(this.La(),"waffle-datasource-configbar-formula-menu")};NUg.prototype.lA=function(a){var b=this;this.Ga(a,!0);this.getHandler().listen(a,"action",function(){var c=new gH("insert-formula-function");c.Ca=a.getValue();b.dispatchEvent(c)})};function OUg(a,b,c){b=c||b;a='<div class="'+T("waffle-dbsource-configbar-wrapper")+'"><div class="'+T("waffle-dbsource-configbar")+'"><div class="'+T("waffle-dbsource-configbar-header")+'"><div class="'+T("waffle-dbsource-configbar-header-icon")+'">'+R(qSe({color:"#5f6368",Xta:24},b))+'</div><div class="waffle-dbsource-configbar-header-title" role="textbox" tabindex="0" aria-label="';a+=yx("Connected sheet name");a+='"></div><div class="waffle-dbsource-configbar-header-subtitle"></div><div class="'+
T("waffle-dbsource-configbar-separator")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-refresh-options-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-options-wrapper")+'"><div class="'+T("waffle-dbsource-configbar-watch-tutorial-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-send-feedback-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-connection-settings-button-wrapper")+'"></div></div></div><div class="'+
T("waffle-dbsource-configbar-actions")+'"><div class="'+T("waffle-dbsource-configbar-columns-menu-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-chart-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-pivot-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-function-button-wrapper")+'"></div><div class="'+
T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-table-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-calculated-column-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-answers-wrapper")+'"></div></div></div></div>';return S(a)}
function PUg(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#188038" fill-rule="nonzero"><path d="M14.5263158 2C15.3368421 2 16 2.7 16 3.55555556V14.4444444C16 15.3 15.3368421 16 14.5263158 16H3.47368421C2.66315789 16 2 15.3 2 14.4444444V3.55555556C2 2.7 2.66315789 2 3.47368421 2H14.5263158zM3.5 3.5v11h11v-11h-11z"/><path d="M6.75 12.75h-1.5V7.5h1.5zM9.75 12.75h-1.5v-7.5h1.5zM12.75 12.75h-1.5v-3h1.5z"/></g></svg>');a=R(a)+"<span>";return S(a+
"Chart</span>")}function QUg(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" fill-rule="evenodd" d="M10 13h1.185c.9975 0 1.815-.81 1.815-1.815V10h-2.25l3-3 3 3H14.5v1.185c0 1.83-1.485 3.315-3.315 3.315H10v2.25l-3-3 3-3V13zM8 6V2h6.5454545C15.3454545 2 16 2.72 16 3.6V6H8zM2 6V3.6C2 2.72 2.72 2 3.6 2H6v4H2zm1.6 10c-.88 0-1.6-.6545455-1.6-1.4545455V8h4v8H3.6z"/></svg>');a=R(a)+"<span>";return S(a+"Pivot table</span>")}
function RUg(){var a=R(cdf())+"<span>";return S(a+"Extract</span>")}function SUg(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" d="M15 2H3v1.75L8.143 9 3 14.25V16h12v-2.625H7.286L11.571 9 7.286 4.625H15z"/></svg>');a=R(a)+"<span>";return S(a+"Function</span>")}
function TUg(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path fill="#188038" d="M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z"/></g></svg>');a=R(a)+"<span>";return S(a+"Calculated column</span>")}
function UUg(){var a='<span class="'+T("waffle-dbsource-configbar-secondary-button-content")+'">';var b=S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-3.5l6-4.5-6-4.5z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+R(b)+"<span>";return S(a+"Watch tutorial</span></span>")}
function VUg(){var a='<span class="'+T("waffle-dbsource-configbar-secondary-button-content")+'">';var b=S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+R(b)+"<span>";return S(a+"Send feedback</span></span>")};function WUg(a,b,c,d,e,f,h){Q.call(this,h);this.xa=a;this.Ca=b;this.ma=c;this.$a=d;this.V=b.xa;this.Za=f;this.R=new zA;this.qa(this.R);this.C=new DO("Columns",new LUg(this.oa()),void 0,this.oa());this.C.Ic("waffle-dbsource-configbar-columns-menu-button");this.C.aj(!0);this.Ga(this.C);this.Ha=XUg(this,"waffle-dbsource-configbar-chart-button",Ky(PUg));this.Ka=XUg(this,"waffle-dbsource-configbar-pivot-button",Ky(QUg));this.Da=XUg(this,"waffle-dbsource-configbar-table-button",Ky(RUg));a=Ky(SUg);this.H=
new Pz(a,new NUg(this.oa()),Iyd.getInstance(),this.oa());this.H.Ic("waffle-dbsource-configbar-function-button");this.H.aj(!0);this.H.zp(!0);this.Ga(this.H);this.O=XUg(this,"waffle-dbsource-configbar-calculated-column-button",Ky(TUg));this.J=new CO("Refresh options");this.J.Ic("waffle-dbsource-configbar-refresh-options-button");this.J.Ic("waffle-dbsource-flat-default");this.Ga(this.J);this.Qa=XUg(this,"waffle-dbsource-configbar-secondary-button",Ky(UUg));this.Ta=XUg(this,"waffle-dbsource-configbar-secondary-button",
Ky(VUg));this.L=new CO(Ky(fC,{icon:"docs-icon-img docs-icon-settings"}),this.oa());this.L.Ic("waffle-dbsource-configbar-connection-settings-button");this.Ga(this.L);this.Xa=new Map([[this.C,""],[this.Ha,"chart"],[this.Ka,"pivot table"],[this.Da,"table"],[this.H,"function"],[this.O,""],[this.J,""],[this.L,""]]);this.Pa=new Map([[this.C,"fedsccm"],[this.Ha,"fedbc"],[this.Ka,"fedp"],[this.Da,"fedr"],[this.H,"fedf"],[this.O,"fedcc"]]);this.Oa=new Map([[this.J,nsb],[this.L,Usb],[this.O,Isb]]);this.D=null;
z(y(),"feda")&&(this.D=new FUg(this.Ca,this.ma,this.$a,e,75,this.oa()),this.Ga(this.D));this.F=null}t(WUg,Q);m=WUg.prototype;m.Ba=function(){this.jb(Ky(OUg))};
m.Ia=function(){var a=this;Q.prototype.Ia.call(this);this.C.render(this.Fa("waffle-dbsource-configbar-columns-menu-button-wrapper"));this.Ha.render(this.Fa("waffle-dbsource-configbar-chart-button-wrapper"));this.Ka.render(this.Fa("waffle-dbsource-configbar-pivot-button-wrapper"));this.Da.render(this.Fa("waffle-dbsource-configbar-table-button-wrapper"));this.H.render(this.Fa("waffle-dbsource-configbar-function-button-wrapper"));this.O.render(this.Fa("waffle-dbsource-configbar-calculated-column-button-wrapper"));
this.J.render(this.Fa("waffle-dbsource-configbar-refresh-options-button-wrapper"));this.Qa.render(this.Fa("waffle-dbsource-configbar-watch-tutorial-button-wrapper"));this.Ta.render(this.Fa("waffle-dbsource-configbar-send-feedback-button-wrapper"));this.L.render(this.Fa("waffle-dbsource-configbar-connection-settings-button-wrapper"));this.D&&this.D.Va(this.Fa("waffle-dbsource-configbar-answers-wrapper"));BA(this.R,this.J,nsb);BA(this.R,this.O,Isb);BA(this.R,this.Qa,Xsb,YUg);BA(this.R,this.Ta,(Qt(),
Kv),YUg,function(){return{source:"big-sheets-feedback"}});BA(this.R,this.L,Usb,ZUg,function(){return new scf($Ug(a),"show-current-source")});this.F=this.Fa("waffle-dbsource-configbar-header-title");this.getHandler().listen(this.Ha,"action",this.Vqb).listen(this.Ka,"action",this.hEb).listen(this.Da,"action",this.MJb).listen(this.H,"show",this.Htb).listen(this.O,"action",this.xqb).listen(this.J,"action",this.DFb).listen(this.C,"show",this.gsb).listen(this.xa,"ua",this.nYb).listen(this.F,["focus","mousedown"],
this.$Bb);this.D?this.getHandler().listen(this.D.getElement(),"keydown",this.qVa):this.getHandler().listen(this.Da.getElement(),"keydown",this.qVa);z(y(),"fedsccm")||this.C.setVisible(!1);this.refresh()};m.qVa=function(a){9===a.keyCode&&(a.preventDefault(),this.dispatchEvent(new aVg))};m.setVisible=function(a){P(this.La(),a);if(this.D&&a){a="";var b=TP(this.xa);b&&b.Tf()&&(a=b.Tf());GUg(this.D,a)}};m.isVisible=function(){return Zw(this.La())};
m.refresh=function(){bVg(this,TP(this.xa).ue());var a=this.Fa("waffle-dbsource-configbar-header-subtitle"),b=cVg(this);b?(b+=" Rows",this.oa().Re(a,b)):this.oa().Re(a,"");a=nL(this.Ca.H)||this.Ca.Qd()||this.Ca.D.Wg()||BKe(this.V,$Ug(this));dVg(this,!a);this.C.Hd(!1);eVg(this);this.D&&GUg(this.D,$Ug(this))};function XUg(a,b,c){c=new qS(c,a.oa());c.Ic(b);a.Ga(c);return c}m.Vqb=function(){ifc(this.V);i4b(null,void 0,$Ug(this));this.ma.C(36528,fVg())};
m.hEb=function(){ifc(this.V);var a=new ei,b=$Ug(this);D(a,1,b);b=SQe();D(b,15,a);z(y(),"fedpos")&&D(b,17,!1);a=TQe(b);a=new cVe(null,AZb(a),void 0);b4b(a);this.ma.C(36527,fVg())};m.MJb=function(){ifc(this.V);l4b($Ug(this));this.ma.C(36529,fVg())};m.Htb=function(){var a=this.H.Ob();if(a&&0==a.yc()){a=this.H.Ob();var b=ipe(new hpe(this.Ca.Ta,a,this.Za),void 0,!0);b=ja(b);for(var c=b.next();!c.done;c=b.next())a.lA(c.value)}ifc(this.V)};m.xqb=function(){this.ma.C(36748,fVg())};
m.DFb=function(){this.ma.C(36749,fVg())};m.$Bb=function(a){if(!this.F.isContentEditable&&!NM(this.Ca)){this.F.contentEditable=!0;if("focus"===a.type){a=window.getSelection();var b=document.createRange();b.selectNodeContents(this.F);a.removeAllRanges();a.addRange(b)}this.getHandler().listen(this.F,"keydown",this.mYb).listen(this.F,"blur",this.YHb)}};m.mYb=function(a){switch(a.keyCode){case 13:gVg(this);break;case 27:hVg(this,!0)}};m.YHb=function(){window.getSelection().removeAllRanges();gVg(this)};
function gVg(a){a.dispatchEvent(new iVg(TP(a.xa).ib(),Ap(a.F)));hVg(a,!1)}function hVg(a,b){a.F.contentEditable=!1;Mo(a.F,"keydown");Mo(a.F,"blur");b&&bVg(a,TP(a.xa).ue())}m.gsb=function(){var a=this,b=this.C.Ob();MUg(b,!0);var c=$Ug(this);pL(this.V,c).then(function(d){eVg(a);0<d.length?b.D(d,c):(a.C.Hd(!1),a.refresh())})};m.nYb=function(a){bVg(this,a.Tm)};function bVg(a,b){var c=a.Fa("waffle-dbsource-configbar-header-title");a.oa().Re(c,b)}
function dVg(a,b){a.Xa.forEach(function(c,d){var e=!a.Pa.has(d)||z(y(),a.Pa.get(d)),f=!a.Oa.has(d)||a.Oa.get(d).isEnabled();d!=a.L&&d.Na(b&&e&&f);e=cVg(a);var h;d.isEnabled()&&d==a.Da?h=z(y(),"femdrr")?"Insert an extract of up to 50k rows to a different sheet":"Insert an extract of up to 25k rows to a different sheet":d.isEnabled()&&d==a.O?h="Add a calculated column":d.isEnabled()&&d==a.J?h="Refresh now or schedule a refresh":d.isEnabled()&&d==a.L?h="Update connection settings":h=d.isEnabled()&&e&&
c?"Insert "+(c+(" based on "+(e+" rows"))):d.isEnabled()&&c?"Insert "+c:d.isEnabled()?"":"You don't have permission or access to refresh or edit analysis with this connected data.";cA(d.La(),h,void 0);h&&whe(d.La(),"waffle-dbsource-configbar-db-object-creation-button-tooltip")});a.D&&a.D.Na(b)}function $Ug(a){return TP(a.xa).Tf()}function eVg(a){a=a.C.Ob();for(MUg(a,!1);1<a.yc();)a.Qn(1,!0)}
function cVg(a){return(a=ritz_api.BigSheetsApi.getDatasourceTotalRowCount($Ug(a)))?Izc.format(parseInt(a,10)):null}function fVg(){var a=sk(new qk,!0);return uz(tz(pz(new oz,75),a))}function iVg(a,b){Bo.call(this,"datasheet-rename");this.Zh=a;this.name=b}t(iVg,Bo);function aVg(){Bo.call(this,"configbar-dom-focus-out")}t(aVg,Bo);var YUg={enabled:!0,selected:!0,visible:!0},ZUg={enabled:!0};function jVg(a,b,c,d,e,f,h,k,l){No.call(this);this.D=a;this.F=b;this.R=l;this.L=c;this.ma=d;this.O=e;this.H=f;this.J=h;this.V=k;this.Ma=new Oo(this);this.qa(this.Ma);this.C=null;this.Ma.listen(this.D,["na","Fa"],this.eQa).listen(this.D,["oa","Ea"],this.HHb).listen(this.F,["acl_change","offline_status","readonly_status"],this.oob);this.eQa()}t(jVg,No);m=jVg.prototype;
m.eQa=function(){var a=TP(this.D);a&&OG(a)&&(this.C?this.C.refresh():(this.C=new WUg(this.D,this.F,this.L,this.ma,this.V,this.R),a=this.C.oa(),this.C.render(a.getElement("waffle-dbsource-configbar-id")),this.C.Yd(this),this.Ma.listen(this.C,"insert-formula-function",this.xIb).listen(this.C,"datasheet-rename",this.wtb).listen(this.C,"configbar-dom-focus-out",this.Bsb)),this.C.setVisible(!0),Gje())};m.wtb=function(a){var b=this;a=new TOc(a.Zh,a.name);VJ(a,function(c){c||hVg(b.C,!0)});this.J.C(a)};
m.Bsb=function(){cP(YJ(this.H))};m.xIb=function(a){var b=this,c=TP(this.D),d=c.Tf();if(d){var e=c.ue(),f=a.Ca;yLe(this.O,function(h,k){var l=ritz_api.BigSheetsApi.getDatasourceReferenceString(e,null);IFa([pL(b.F.xa,d),aq(1E3)]).then(function(){return kVg(b,f,l,k)})},"Insert Formula");this.L.C(36535,fVg())}};
function kVg(a,b,c,d){if(d)a.F.C.RB(d.yj,function(){var f=QI(a.F.C),h=new Lm(d.C,d.lk);yJ(f,h);lVg(a,b,c,h)});else{var e=new see(II(a.F.C)+1);VJ(e,function(f){f&&lVg(a,b,c,new Lm)});a.J.C(e)}}function lVg(a,b,c,d){nq(FI($J(a.H).C,fn(d)),function(){uge(YJ(a.H),b,c)})}m.HHb=function(){this.C&&this.C.setVisible(!1)};m.oob=function(){var a=TP(this.D);a&&OG(a)&&this.C&&this.C.refresh()};m.Ja=function(){No.prototype.Ja.call(this);Jf(this.C)};function mVg(){var a='<div class="'+T("waffle-create-datasheet-welcome-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_welcome.png" class="'+T("waffle-create-datasheet-welcome-dialog-image")+'" alt=""><h3 class="'+T("waffle-create-datasheet-welcome-dialog-welcome-message")+'"><span>';a=a+'Connect and analyze big data in Sheets</span></h3><div class="'+(T("waffle-create-datasheet-welcome-dialog-welcome-description")+'">');a=a+"Connect to BigQuery, Google's cloud data warehouse, to analyze and share billions of rows of data with your colleagues - all within Sheets</div><div class=\""+
(T("waffle-create-datasheet-welcome-dialog-button-wrapper")+'"></div></div>');return S(a)};function nVg(a){bZ.call(this,"waffle-create-datasheet-welcome-dialog",a);this.F=new qS("Learn the basics",this.oa());this.Ga(this.F);this.D=new zC("Get connected",this.oa());this.Ga(this.D)}t(nVg,bZ);m=nVg.prototype;
m.Ba=function(){bZ.prototype.Ba.call(this);Iy(this.rb(),mVg);this.F.render(this.Fa("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.F,"action",this.oYb);this.D.render(this.Fa("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.D,"action",this.rVa);Qx(this.Fa("waffle-dataconnector-modal-title"));var a=this.Fa("waffle-create-datasheet-welcome-dialog-welcome-message");a.id=jx(this,"waffle-create-datasheet-welcome-dialog-welcome-message");
Px(a,"heading");Rx(this.La(),"labelledby",a.id);a=this.Fa("waffle-create-datasheet-welcome-dialog-welcome-description");a.id=jx(this,"waffle-create-datasheet-welcome-dialog-welcome-description");Rx(this.La(),"describedby",a.id)};m.oYb=function(){nx("https://connectedsheets.page.link/support")};m.rVa=function(){this.resolve(!0)};m.qta=function(a){13==a.keyCode&&this.rVa()};m.e4=function(){Vrb.mb();this.reject()};m.iE=function(){Vrb.mb();this.reject()};function oVg(a){a=a.zmb;a='<div class="'+T("waffle-create-datasource-sheet-loading-dialog-section")+'"><img class="'+T("waffle-create-datasource-sheet-loading-dialog-image")+'" src="'+T(Ax(a))+'" alt=""><div class="'+T("waffle-create-datasource-sheet-loading-dialog-tip")+'">';return S(a+"Connecting data\u2026</div></div>")};function pVg(a,b,c){VY.call(this,"waffle-create-datasource-sheet-loading-dialog",c);this.F=a;this.D=b}t(pVg,VY);pVg.prototype.Ba=function(){VY.prototype.Ba.call(this);Iy(this.rb(),oVg,{zmb:this.F});Qx(this.Fa("waffle-dataconnector-modal-title"));var a=this.Fa("waffle-create-datasource-sheet-loading-dialog-tip");a.id=jx(this,"waffle-create-datasource-sheet-loading-dialog-tip");Px(a,"heading");Rx(this.La(),"labelledby",a.id)};pVg.prototype.Ia=function(){VY.prototype.Ia.call(this);this.D.C(36758,qVg())};
pVg.prototype.Ja=function(){VY.prototype.Ja.call(this);this.D.C(36759,qVg())};function qVg(){var a=sk(new qk,!0);return uz(tz(pz(new oz,75),a))};function rVg(){var a='<div class="'+T("waffle-create-datasource-sheet-success-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_success_2.gif" class="'+T("waffle-create-datasource-sheet-success-dialog-image")+'" alt=""><h5 class="'+T("waffle-create-datasource-sheet-success-dialog-success-message")+'">';a=a+'Success! Your BigQuery data is connected and ready to analyze</h5><div class="'+(T("waffle-create-datasource-sheet-success-dialog-metadata-wrapper")+" "+T("waffle-create-datasource-sheet-success-dialog-datasource-info")+
'"></div><div class="'+T("waffle-create-datasource-sheet-success-dialog-success-description")+'">');a=a+"Create pivot tables, formulas, and charts in the same way you're already familiar with</div><div class=\""+(T("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper")+'"></div><div class="'+T("waffle-create-datasource-sheet-success-dialog-watch-tutorial")+" "+T("goog-link-button")+'"><span>');return S(a+"Watch video tutorial</span></div></div>")};function sVg(a,b,c){VY.call(this,"waffle-create-datasource-sheet-success-dialog",c);this.J=a;this.H=b;this.F=new zC("Start analyzing",this.oa());this.Ga(this.F);this.D=new yz(void 0,HN.getInstance(),this.oa());this.Ga(this.D)}t(sVg,VY);
sVg.prototype.Ba=function(){var a=this;VY.prototype.Ba.call(this);Iy(this.rb(),rVg);var b=this.Fa("waffle-create-datasource-sheet-success-dialog-metadata-wrapper");this.oa().Re(b,tVg(this.J,this.H));this.F.render(this.Fa("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper"));this.D.Va(this.Fa("waffle-create-datasource-sheet-success-dialog-watch-tutorial"));Qx(this.Fa("waffle-dataconnector-modal-title"));b=this.Fa("waffle-create-datasource-sheet-success-dialog-success-message");
b.id=jx(this,"waffle-create-datasource-sheet-success-dialog-success-message");Px(b,"heading");Rx(this.La(),"labelledby",b.id);b=this.Fa("waffle-create-datasource-sheet-success-dialog-success-description");b.id=jx(this,"waffle-create-datasource-sheet-success-dialog-success-description");Rx(this.La(),"describedby",b.id);this.getHandler().listen(this.F,"action",function(){return a.iE()}).listen(this.D,"action",function(){return Xsb.mb()})};
function tVg(a,b){a=(new pB("{NUM_COLUMNS, plural,=0 {No columns}=1 {1 column}other {# columns}}")).format({NUM_COLUMNS:a});return b?b+" rows \u2022 "+a:a};function uVg(a,b,c,d,e,f,h,k,l,n,q,r){ldf.call(this,new Faf(n.getType(),l,"filter_db_sheet",r),a,b,c,d,e,f,h,k,l,q,r);this.tb=oL(n);this.Fc=new tl}t(uVg,ldf);m=uVg.prototype;m.Ba=function(){ldf.prototype.Ba.call(this);var a=hO(this.D,this.eh());QTg(this.H.C,500<a.left?0:3)};
m.jQa=function(){var a=this.Sa().Xb(),b=ritz_api.BigSheetsApi.getDatasourceSheetCriteria(a,this.Fc.serialize(this.tb)),c=null,d=null;0<b.length&&(c=this.Fc.Jd(Ah.Aa(),b[0]),d=X0e(a));Z0e(this.H,c,d);a=this.J;b=this.V;c=this.Sa().Xb();c=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(c,this.Fc.serialize(this.tb));by(a.La(),"waffle-datasourcesheet-sort-selected",0==c);by(b.La(),"waffle-datasourcesheet-sort-selected",1==c);a=this.C;b=a.Ob().La();Yx(b,"waffle-datasourcesheet-filterbox-container");pV(a);
Vw(b,"");a.jm()};m.LNa=function(a){if("filtering_cancelled"==a.type)this.Qa();else if(a=this.eh(),a=S0e(this.H,this.Sa().Xb(),a.y,a.x,!1,!1),!B0e(this.H.C)){if(null==a)var b=new cX("filterClear");else b=new cX("filterUpdate"),b.D=a;b.O=this.tb;this.dispatchEvent(b);this.Qa()}};m.Ita=function(a){var b=new cX("filterSort");b.O=this.tb;b.F=a?1:0;this.dispatchEvent(b)};m.lSa=ea(!1);
m.ema=function(a){var b=this.D,c=iO(b,"r",a.y),d=b.C,e=2*d.C,f=this.Sa().bh(a.y,a.x).getFormat();c=-c-e;a="rtl"==(f.D||null)||"auto-rtl"==(f.D||null)?e:iO(b,"c",a.x)-16*d.C-e;d=d.C;this.Yz(new Lm(a/d,c/d))};function vVg(a,b,c,d,e,f){d=void 0===d?null:d;e=void 0===e?!1:e;f=void 0===f?!1:f;UJ.call(this,147);this.R=a.Xb();this.O=b;this.C=c||[];this.F=d;this.J=e;this.L=f}t(vVg,UJ);vVg.prototype.Nd=function(){var a=new SPb;D(a,1,this.R);D(a,7,this.O);if(this.J)D(a,5,!0);else for(var b=0;b<this.C.length;b++)Mg(a,3,this.C[b]);this.L?D(a,6,!0):null!=this.F&&D(a,4,this.F);return a};
vVg.prototype.equals=function(a){return this.R==a.R&&this.O.equals(a.O)&&this.J==a.J&&this.L==a.L&&this.F==a.F&&td(this.C,a.C,function(b,c){return b.equals(c)})};function wVg(a,b,c,d,e,f,h){A.call(this);this.xa=a;this.O=h;this.ma=b;this.D=c;this.V=d;this.R=e;this.L=f;this.Ma=new Oo(this);this.qa(this.Ma);this.C=null;this.F=new tl;this.H=new xA(this);this.qa(this.H);this.Ma.listen(this.D,"filter-triggered",this.J);this.H.subscribe(KD,"action",this.J)}t(wVg,A);
wVg.prototype.J=function(){var a=TP(this.ma);if(a&&OG(a)){var b=YJ(this.D),c=xVg(this),d=vJ(c),e=tJ(xVg(this));d=new Lm(d.x,e.y);e=Efe(c,d.x);this.C&&(this.C.dispose(),this.C=null);this.C=new uVg(c,this.R,b.O,b.C,b.F,new aN(d),!1,!1,this.V,e,this.O);this.qa(this.C);JN(uNc(b),this.C);this.Ma.listen(this.C,"filterClear",this.Ca).listen(this.C,"filterSort",this.Ha).listen(this.C,"filterUpdate",this.Da);this.C.ema(d);this.C.Sc();this.C.C.Hd(!0);b=oL(e);a=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(a.ib(),
this.F.serialize(b));b=$o("waffle-autofilter-sort waffle-datasourcesheet-sort-selected");null!=a&&b&&(Ux(b,b.innerText+" selected"),by(b,"hc-enabled-focus","black"==eA()))}};wVg.prototype.Ca=function(a){a=new vVg(xVg(this),a.O,null,null,!0);yVg(this,a)};wVg.prototype.Da=function(a){var b=new Ah;D(b,4,a.D);a=new vVg(xVg(this),a.O,[b],null);yVg(this,a)};
wVg.prototype.Ha=function(a){var b=xVg(this).Xb(),c=a.O;b=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(b,this.F.serialize(c));var d=!1;switch(a.F){case 1:d=0==b;break;case 0:d=1==b}a=d?new vVg(xVg(this),c,null,null,void 0,!0):new vVg(xVg(this),c,null,1==a.F?0:1);yVg(this,a)};function yVg(a,b){a.L.C(b);uLe(uNc(YJ(a.D)));Jf(a.C);a.C=null}function xVg(a){return QI(a.xa.C)};function zVg(a,b,c,d,e,f,h){A.call(this);var k=this;this.Ma=new Oo(this);this.qa(this.Ma);this.xa=a;this.J=a.O;this.F=b;this.C=c;this.V=e;this.R=f;this.O=new xA(this);this.qa(this.O);this.ma=h;this.H=this.D=null;AVg(this);BVg(this,d);this.L=new oo;this.qa(this.L);po(this.L,this.J.D,function(l){var n=CVg(k);n&&CKe(l,n)&&DVg(k,n)})}t(zVg,A);function AVg(a){var b=new yw(["waffle-dbsheet-or-dbobject-pill-active"]);a.R.C(Osb,b)}
function BVg(a,b){var c=eH(a.xa.C);a.Ma.listen(b,"J",a.vJb).listen(c,"Lb",a.qYb).listen(c,["ub","Hb"],a.Gfa).listen(a.F,"na",a.Gfa).listen(a.C,"activeCellChange valueChange blurEmbeddedObject embeddedObjectMouseEnter embeddedObjectMouseLeave focusEmbeddedObject".split(" "),a.Gfa).listen(a.C,"inputBoxActivate",a.aea).listen(a.C,"mouseover",a.pYb).listen(a.C,"refresh-db-object-request",a.APa).listen(a.F,"oa",a.Hoa).listen(a.C,"db-connection-settings",a.RNa);a.O.subscribe(Osb,"action",a.cxb)}m=zVg.prototype;
m.Ja=function(){this.Hoa();A.prototype.Ja.call(this)};m.qYb=function(){var a=YJ(this.C);a&&ZJ(this.C)&&PMc(a)};m.Hoa=function(){Kf(EVg(this),FVg(this),this.D);this.H=this.D=null};m.vJb=function(){this.D&&JTg(this.D)};
m.Gfa=function(){var a=YJ(this.C),b=TP(this.F);if(a&&b){b=!!a.Xa;var c=!!qNc(a);b||!c||a.Xa||(a.Xa=new KTg(a.Sa(),a.O,a.C,a.F,new aN(lNc(a),new Lm(0,0)),a.Da,a.tb,a.gb),hP(a.V,"default",a.Xa,!0),a.qa(a.Xa),a.Xa.setVisible(!0));b=a.Sa();a=qNc(a)||vJ(b);(a=fJ(WI(b,a),a,b.Xb()))&&(a.C||a.D)?this.aea():(a=CVg(this),(a!=this.H||GVg(this,a))&&DVg(this,a))}else this.Hoa()};
function GVg(a,b){if(!b||2!=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b))return!1;var c=YJ(a.C);if(!c)return!1;b=OTg(c);c=MTg(c);if(b==c)return!1;a=EVg(a);return b&&null==c&&a&&a.isVisible()&&null!=a.C.Ob()&&a.C.Ob().isVisible()?!1:!0}
function DVg(a,b){if(b){a.aea();var c=HVg(a);if(c){var d=ET(a.J,b);var e=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);var f=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(b),h=null;f&&(h=(f=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(f))?parseInt(f,10):null);e=new RTg(b,e,h);Ozc(c,d,e);4==e.C&&JTg(c);IVg(a,b,c,d);a.H=b}}else a.aea()}m.aea=function(){var a=EVg(this);a&&a.setVisible(!1);(a=FVg(this))&&a.setVisible(!1);this.H=null};
m.cxb=function(){var a=HVg(this);a&&(a.La().focus(),this.V.Rb(2))};m.APa=function(){var a=CVg(this);if(a)switch(ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a)){case 1:Xrb.mb(a);break;case 5:$rb.mb(a);break;case 3:esb.mb(a);break;case 2:Yrb.mb(a);break;case 4:Ssb.mb(a)}};m.RNa=function(){var a=CVg(this);if(a){var b=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(a);b&&(a=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(b))&&VP(this.F,a,function(){Usb.mb(new scf(b,"show-current-source"))})}};
m.pYb=function(a){var b=TP(this.F),c=YJ(this.C);c&&b&&3!=b.getSheetType()&&(a=a.qk)&&Ioc(a)&&(this.Gfa(),PMc(c))};
function HVg(a){var b=CVg(a);if(!b)return null;var c=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);if(4==c)if(3!=TP(a.F).getSheetType())a=null;else{if(!a.D){c=YJ(a.C);b=c.Se();a.D=new Jzc(a.ma,b);a.Ma.listen(a.D,"refresh-db-object-request",a.APa).listen(a.D,"db-connection-settings",a.RNa);c=new Ix(c.Ha.J,b?5:1);a.D.render();var d=a.D;d.od=c;d.O=b}a=a.D}else if(2==c)if(a=YJ(a.C))a:if(c=a.J.C,NTg(a)==b)b=LTg(a.J).Xd().getId(),a=ANc(a,b);else{for(d=c.length-1;0<=d;d--){var e=c[d];if(e&&
ritz_api.BigSheetsApi.getExternalDataIdForObject(e)==b){a=ANc(a,e);break a}}a=null}else a=null;else a=FVg(a);return a}function EVg(a){return(a=YJ(a.C))?zNc(a):null}function FVg(a){a=YJ(a.C);return a?(a=a.Xa)?a.F:null:null}function CVg(a){return(a=YJ(a.C))?PTg(a):null}function IVg(a,b,c,d){CD.isEnabled()&&JVg(d.getType())&&(c.pN(),afe(a.J,b,function(e){return c.Rw(e)},function(e){return c.uC(e)}))}function JVg(a){return"no-results"==a||"fetch-successful"==a||"fetch-failed"==a};function KVg(a,b){UJ.call(this,154);this.F=a;this.C=b}t(KVg,UJ);KVg.prototype.Nd=function(){var a=new eQb;D(a,1,this.F);for(var b=0;b<this.C.length;b++)Mg(a,2,this.C[b]);return a};function LVg(a,b){this.D=a;this.C=b};function MVg(a){this.D=a;this.C={};this.F=new tl}
function NVg(a,b){b&&b.forEach(function(c){if(a.C[c]){var d=(new Date).getTime()-a.C[c].D,e=nfc(c),f=e?e.getState():null;if(e&&f&&(2==f||3==f)){if(e=OVg[f]){d=mk(new lk,1E3*d);var h=a.C[c].C;f=new v2d;f=L(f,2,h);var k=ritz_api.RitzModelApi.getExternalData(c);if(k){k=a.F.Jd(Fi.Aa(),k);a:switch(h){case 3:var l=C(k,6).getFormat();l=Lg(l,1)+Lg(l,2)+Lg(l,3);break a;case 6:l=C(k,8)?1:0;break a;default:l=Lg(C(k,7),1)}L(f,5,l);a:switch(h){case 3:h=C(k,6);h=Lg(h,3);break a;case 6:h=C(k,8)?1:0;break a;default:h=
Lg(C(k,7),2)}L(f,4,h)}h=new qk;f=Oj(h,16,f);f=sk(f,!0);d=tz(rz(pz(new oz,41),d),f);a.D.C(e,uz(d))}delete a.C[c]}}})}var PVg={},OVg=(PVg[2]=36294,PVg[3]=36567,PVg);function QVg(a,b){UJ.call(this,139);this.C=a||"";this.F=b}t(QVg,UJ);QVg.prototype.Nd=function(){var a=new xPb;D(a,1,this.C);D(a,2,this.F);return a};QVg.prototype.pG=function(){return zPb.Aa()};function RVg(a,b,c,d,e,f,h,k,l,n,q,r,w){ycf.call(this,a,b,d,f,h,k,l);var x=this;this.Pa=new jVg(b,this.F,l,q,f,c,n,d,w);this.qa(this.Pa);this.fb=f;this.Ma=new Oo(this);this.qa(this.Ma);this.Xa=new zVg(a,b,c,d,e,k,l);this.qa(this.Xa);this.ma=n;this.Ka=a.D.C;this.Ha=new tl;this.Oa=new MVg(l);this.$a=r;this.Ta=new wVg(a,b,c,l,e,n,w);this.qa(this.Ta);this.L=new Set;this.R=new Set;(b=aD.getInstance().C.newDatasourceIdFromOnboarding)?(this.L.add(b),SVg(this)):aD.getInstance().C.showBigSheetsOnboardingDialogOnStart&&
Psb.isEnabled()&&this.h1a();this.Ma.listen(this.F,"db-execution-status-updated",this.Q$b).listen(this.D,"na",this.v2a);this.Da=new oo;this.qa(this.Da);po(this.Da,a.O.D,function(F){x.v2a();TVg(x,F)})}t(RVg,ycf);m=RVg.prototype;
m.pFa=function(a){a.C(Nsb,oS).D(Nsb,oS).C(Rsb,oS).C(Usb,lyd).D(Usb,lyd).C(BD,oS).D(BD,oS).C(Ssb,oS).C(lsb,lyd).C(Vsb,oS).C(Wsb,oS).C(CD,oS).C(Tsb,oS).C(Isb,oS).C(Ksb,oS).C(Jsb,oS).C(Xsb,myd).D(Xsb,myd).C(Lsb,kyd).C(Msb,oS).D(Msb,oS);z(y(),"fedp")&&a.C(Xrb,oS);z(y(),"fedr")&&a.C($rb,oS);z(y(),"fedbc")&&a.C(Yrb,oS);z(y(),"feci")&&a.C(Zrb,oS);z(y(),"fedf")&&a.C(esb,oS);a.C(msb,oS)};
m.X1a=function(){var a=this;this.V.subscribe(Rsb,"action",this.Ca).subscribe(Nsb,"action",this.Usb).subscribe(BD,"action",this.TKb).subscribe(Usb,"action",this.ddc).subscribe(Ssb,"action",function(b){return UVg(a,1,b)}).subscribe(Yrb,"action",function(b){return UVg(a,2,b)}).subscribe(Zrb,"action",function(b){return UVg(a,6,b)}).subscribe($rb,"action",function(b){return UVg(a,5,b)}).subscribe(Xrb,"action",function(b){return UVg(a,3,b)}).subscribe(esb,"action",function(b){return UVg(a,4,b)}).subscribe(lsb,
"action",this.sIb).subscribe(Vsb,"action",this.ija).subscribe(Wsb,"action",this.i1a).subscribe(msb,"action",function(b){if(0!==b.length){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=ET(a.F.O,e).C;null!=f&&f.El()&&37==f.getErrorCode()&&(e=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(e),e=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(e),e=EI(a.F.C,e).ue(),c.push(e))}od(c);0<c.length?(b="You do not have access to the following BigQuery connection(s): \n\n"+(c.join(", ")+" \n\n Contact the owner of the sheet or your admin to request access. \n\n"),
b=Ee(b),VVg(a,b,"Refresh failed")):(WVg(a,ritz_api.BigSheetsApi.createRefreshObjectRequest(b),null,b),XVg(a,b))}}).subscribe(Xsb,"action",this.ELb).subscribe(Isb,"action",function(){return YVg(a,null,!0)}).subscribe(Ksb,"action",this.sib).subscribe(Jsb,"action",this.Fcb).subscribe(Lsb,"action",this.Egc).subscribe(Msb,"action",this.Wsb)};m.Q$b=function(a){NVg(this.Oa,a.D)};m.TKb=function(a){ZVg(this,a.Tf(),a.C)};
m.ddc=function(a){var b=this,c=a.Tf();if("pick-new source"==a.C)this.ija(new ebf(c,null));else{a=ritz_api.BigSheetsApi.getDatasourceSlotDeltaProto(c);var d=this.Ha.Jd(Ch.Aa(),a),e=new $Y(kL.getInstance());nq(this.J,function(f){if(z(y(),"fdcws")&&Kg(d,3)&&Kg(C(d,3),4)){var h=f.kkb(c,d);b.qa(h);UY(b.C,h)}else if(!BD.isEnabled()&&Kg(d,3)&&Kg(C(d,3),4))h=f.jkb(c,d),b.qa(h),UY(b.C,h);else{var k=Bcf("Connecting to BigQuery\u2026");Wbf(e).then(function(l){RA(QA.getInstance(),k);l=f.FJa(c,d,l);b.qa(l);UY(b.C,
l)},function(){RA(QA.getInstance(),k);if(Kg(d,3)&&Kg(C(d,3),1)){var l=f.GJa(c,d,[],!0);b.qa(l);UY(b.C,l)}else b.xda()})}})}};m.i1a=function(a){var b=this;nq(this.J,function(c){var d=a.H,e=d?d.C:null;if(e){if(Kg(C(e,3),4)){var f=C(e,3);e=C(f,5);var h=new Ch;D(h,2,2);var k=new Dh;f=C(f,4);var l=C(f,3)||"";f=l+(l?".":"")+C(f,2)+"."+f.getName();D(k,1,"select * from `"+f+"`");D(k,5,e);D(h,3,k);e=h}c=c.FJa(d.Tf(),e,a.C)}else c=c.dkb(a,d||void 0);b.qa(c);UY(b.C,c)})};m.Usb=function(a){ZVg(this,null,a.C)};
function ZVg(a,b,c){var d=null==b;b=new QVg(b,c);VJ(b,function(e,f){e&&(e=f.Tf(),$Vg(a,e),d&&(a.L.add(e),SVg(a)))});a.ma.C(b);d||Qaf(a.C)}function $Vg(a,b){var c=ritz_api.BigSheetsApi.generateExternalDataIdForDatasourceSheet(b);b=ritz_api.BigSheetsApi.createRefreshObjectRequestForDatasourceSheetInitialLoad(c,b);WVg(a,b,1,[c])}
m.h1a=function(){var a=this,b=this.F.F.F["ritz-DisplayCountBigsheetsWelcomeDialog"],c=b.getValue();if(1<=c)this.ija();else{b.setValue(Math.min(c+1,2147483647));var d=new nVg;this.qa(d);UY(this.C,d);d.getResult().then(function(e){e?a.ija():Jf(d)},function(){Jf(d)})}};function SVg(a){var b=new pVg("//ssl.gstatic.com/docs/spreadsheets/bigsheets_loading_3.gif",a.O);a.qa(b);UY(a.C,b)}
function YVg(a,b,c){var d=TP(a.D);if(d&&OG(d)){var e=d.Tf();pL(a.F.xa,e).then(function(f){var h=new fUg(f,e);f=new CUg(e,b,f,h,a.F.Ta,c,a.ma,a.$a,a.Ka,a.O);a.qa(f);a.Ma.listen(f,"update",a.yqb);UY(a.C,f)})}}m.sib=function(){var a=TP(this.D);a&&OG(a)&&(a=aWg(a),YVg(this,a[0],!0))};m.Egc=function(){var a=TP(this.D);a&&OG(a)&&(a=aWg(a),YVg(this,a[0],!1))};
m.Fcb=function(){var a=this,b=TP(this.D);if(b&&OG(b)){var c=aWg(b),d=c.length;d=(new pB("{NUM_COLUMNS, plural,=1 {Are you sure you want to delete this calculated column?}other {Are you sure you want to delete {NUM_COLUMNS} calculated columns?}}")).format({NUM_COLUMNS:d});NNc(this.fb,d,function(){return bWg(a,b.Tf(),c)})}};function bWg(a,b,c){c=new KVg(b,c);VJ(c,function(d){a.O.C(d?36648:36649);!z(y(),"fedccp")&&d&&$Vg(a,b)});a.ma.C(c)}
m.yqb=function(a){z(y(),"fedccp")||$Vg(this,a.xt);var b=TP(this.D);b&&OG(b)&&b.Tf()==a.xt&&a.C&&(a=b.Jc(),b=fn(new Lm(a.yg()-1,0)),HI(a,JYb(a,b)))};function aWg(a){a=a.Jc();var b=rJ(a);return bzc(a,b).map(function(c){return C(c,2)})}
m.v2a=function(){var a=TP(this.D);if(a&&OG(a)){var b=a.Tf();if(this.L.has(b)){var c=ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(a.ib());if(c)if(c=ET(this.F.O,c),"fetch-successful"==c.getType()){a=a.Jc().yg();var d=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(b);c=null;null!==d&&(d=parseInt(d,10),0<d&&(c=Izc.format(d)));a=new sVg(a,c);this.qa(a);UY(this.C,a,!0);this.L.delete(b)}else"fetch-failed"==c.getType()&&(Paf(this.C)instanceof pVg&&Raf(this.C),this.L.delete(b))}}};
m.ija=function(a){var b=this,c=new YTg(new $Y(kL.getInstance()),this.O,a);this.qa(c);UY(this.C,c);c.getResult().then(function(d){b.i1a(d)},function(d){d&&b.xda();Jf(c)});a=new XJ(c.getElement());w6b(a,"loadingGif","//ssl.gstatic.com/docs/spreadsheets/bigsheets_loading_3.gif");a.start()};m.xda=function(){this.O.C(36685);Dcf("Could not connect to BigQuery")};
function UVg(a,b,c){var d=ET(a.F.O,c).C;null!=d&&d.El()&&37==d.getErrorCode()?(b=fbf(3,d),VVg(a,b,"Refresh failed")):(WVg(a,ritz_api.BigSheetsApi.createRefreshObjectRequest([c]),b,[c]),XVg(a,[c]))}
function WVg(a,b,c,d){b=a.Ha.Jd(Ncc.Aa(),b);var e=(new Date).getTime();ITg(a.F.O,d);HTg(kL.getInstance(),b,a.Ka).then(function(f){var h=Og(f,2),k=1==d.length?d[0]:null;!h[0].Li().El()&&k&&c&&(a.Oa.C[k]=new LVg(e,c));h=ja(h);for(k=h.next();!k.done;k=h.next()){var l=k.value;k=l.Li();3===k.getState()&&(l=l.Ct(),Dfc(a.F.O,new Set([l]),k))}return f},function(f){var h=Dfc,k=a.F.O,l=new Set(d);f=C(f,2,0);h(k,l,f.Li())})}
function XVg(a,b){if(0!=b.length){var c=new pB("{numObjects, plural, =1 {Refreshing object} other {Refreshing # objects}}");TJ(c.format({numObjects:b.length}));b.forEach(function(d){return a.R.add(d)})}}function TVg(a,b){0!=a.R.size&&(b.C.forEach(function(c){var d=ET(a.F.O,c);"loading"!=d.getType()&&"fetching-results"!=d.getType()&&a.R.delete(c)}),0==a.R.size&&"dbobjectmodel-event-update"==b.getType()&&TJ("Refresh complete"))}
m.sIb=function(a){if(a){var b=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a.Ct());a=VTg(b,a.C);VVg(this,a.body,a.title)}};function VVg(a,b,c){X3b(b,ba(),c,cWg,a.dYb,void 0,void 0,!1,"big-sheets-feedback")}m.ELb=function(){nx("https://connectedsheets.page.link/tutorial",{target:"_blank"})};m.dYb=function(){nx("https://connectedsheets.page.link/support")};m.Wsb=function(){var a=TP(this.D);a&&OG(a)&&(ifc(this.F.xa),l4b(a.Tf()))};var cWg={ok:"OK",cancel:"Learn more"};function dWg(){A.call(this)}t(dWg,KJ);dWg.prototype.C=function(){return RVg};PJ("dbsource",dWg);
